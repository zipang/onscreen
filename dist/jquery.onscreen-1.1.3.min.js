(function(e,t,n){function a(t,n){var r=typeof t=="string"?t.replace(/^#/,""):u.screen,i=e(t||"#"+r);return i.length===1?i:e("<div>").attr("id",r).css({position:"fixed",left:0,top:0,margin:0,padding:n.padding||0,overflow:"hidden",zIndex:n.zindex||-999999,height:"100%",width:"100%"}).prependTo("body")}function f(t,n,r){var i;return t?(n?i=e("<div>").append(t).append(e(n)):i=t,i.addClass("slide "+r)):e("<div>").append(e(n||""))}function l(t){var t=t;return function(n,r,i,s){r.addClass("in"),n.addClass("out"),e("img",t).show(),t.addClass("transition"),setTimeout(function(){n.remove(),t.removeClass("transition"),r.removeClass("in"),typeof s=="function"&&requestAnimationFrame(s),t.trigger(r===o?"emptySlide":"transitionEnd",r)},i)}}function c(t){var t=t;return function(n,r,i,s){e("*",r).show(),n.fadeOut(i),r.fadeIn(i,function(){n.remove(),typeof s=="function"&&s(),t.trigger(r===o?"emptySlide":"transitionEnd",r)})}}function h(){function x(t){var t=t;return function(){var n=t.width(),r=t.height(),i=t.data("image");if(!i)return;var s=i.data("format"),o=n,u=o/s;b.stretchMode=="crop"?u<r&&(u=r,o=u*s):b.stretchMode=="adapt"?s<1&&(u=r,o=u*s):u>r&&(u=r,o=u*s);var a={position:"absolute",left:0,top:0};return b.centeredY&&e.extend(a,{top:(r-u)/2+"px"}),b.centeredX&&e.extend(a,{left:(n-o)/2+"px"}),i.width(o).height(u).css(a)}}var t,i=arguments[0]||"",s=i.source?i:arguments[1]||{},p=typeof i=="string"?i:s.source,d=s.type||"image",v=h.getPlugin(p),m=s.content,g=s.callback,y=e.Deferred();if(!p)return y.reject("Invalid Params : No source").promise();if(p==="settings")return e.extend(u,s),y.resolve(u);t=new a(s.screen,s),t.data("monitored")||(r.on("resize",x(t)),t.data("monitored",!0));var b=t.data("settings")||u;e.extend(b,s),b.transition==="fade"&&(b.transition=b.useCSSTransitions?l(t):c(t)),t.data("settings",b);var w=t.find(".slide"),E;y.then(function(e,n){E=e||n?new f(e,n,d):o,(b["class"]||b.className)&&E.addClass(b["class"]||b.className),!b.useCSSTransitions&&b.newSlide&&E.css(b.newSlide),t.prepend(E).trigger("loaded",[s,E]),(w.length||E.length)&&b.transition(w,E,b.transitionSpeed,g)});if(!p)d="empty",t.data("image",n),y.resolve(n,m);else if(d==="image")if(typeof p=="string"){var S=e("<img>").css({display:"none",zIndex:-999999,width:"auto",height:"auto"});S.on("load",function(){var n=this;t.data("image",S).append(S.data("format",n.width/n.height||4/3)),y.resolve(x(t)(),m)}).on("error",function(){t.data("image",n),y.resolve(n,m)}).attr("src",p)}else t.data("image",p),p.data("format",p.width()/p.height()),p.removeAttr("style").appendTo(t),y.resolve(x(t)(),m);else y.resolve(v.load(p,s),m),t.data("image",e("iframe",t));return y.promise()}var r=e(t),i=document,s=(i.body||i.documentElement).style,o=e(),u={screen:"#screen",stretchMode:"crop",centeredX:!0,centeredY:!0,transitionSpeed:1e3,transition:"fade",newSlide:{opacity:0},useCSSTransitions:"WebkitTransition"in s||"MozTransition"in s||"OTransition"in s||"transition"in s};t.requestAnimationFrame||(t.requestAnimationFrame=function(e){setTimeout(e,10)}),e.extend(h,{_plugins:{},getPlugin:function(e,t){var r=h._plugins,i,s;if(t&&r[t])return r[t];for(s in r){i=r[s];if(i.canHandle(e))return i}return n},addPlugin:function(e,t,n){var r=t instanceof RegExp?function(e){return t.test(e)}:t;return h._plugins[e]={canHandle:r,load:n},h}}),h.addPlugin("image",function(n){if(typeof n=="string")return/\.(png|jpg|jpeg|gif)$/i.test(n);if(e(n).prop("tagName")==="IMG")return!0},function(t){return t}),e.onScreen=h})(window.jQuery||window.Zepto,window),function(e,t,n){function s(t,i){function l(i){typeof i=="string"&&i==="last"?a=u-1:typeof i=="string"&&i==="fist"?a=0:i===n||i<0||i>=u?a=(a+1)%u:a=i,l.future=f?setTimeout(function(){requestAnimationFrame(l)},o.slideDuration):0;var s=t[a];typeof s=="object"?r(s.src,e.extend({},o,s)):r(s,o),o.events&&e(o.screen).trigger("slide",t[a])}function c(){f=!1,clearTimeout(l.future)}function h(){f=!0,l()}function p(e){c(),l(a+1),e&&e.preventDefault()}function d(e){c(),l(a?a-1:u-1),e&&e.preventDefault()}function v(){f?c():h()}function m(e){switch(e.keyCode){case 37:d();break;case 39:p();break;case 32:v()}}var o=e.extend({},s.defaults,i),u=t.length,a=0,f=o.autoplay;return o.keyControls&&e(document).on("keydown",m),r("settings",o),l(0),{stop:c,play:h,playPause:v,displaySlide:l,previous:d,next:p}}var r=e.onScreen;if(!r)return;var i={autoplay:!0,screen:"#screen",slideDuration:4e3,transitionSpeed:1500,keyControls:!0,videoPlayer:{bgcolor:"black",width:960,height:540,autoplay:1,color:"111"}};s.defaults=i,e.onScreen=function(t,n){if(e.isArray(t))return new s(t,n);r(t,n)},e.extend(e.onScreen,{_plugins:r._plugins,getPlugin:r.getPlugin,addPlugin:r.addPlugin})}(window.jQuery||window.Zepto,this)