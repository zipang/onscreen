!function(e,t,n){function i(t,n){var i="string"==typeof t?t.replace(/^#/,""):p.screen,a=e(t||"#"+i);return 1===a.length?a:e("<div>").attr("id",i).css({position:"fixed",left:0,top:0,margin:0,padding:n.padding||0,overflow:"hidden",zIndex:n.zindex||-999999,height:"100%",width:"100%"}).prependTo("body")}function a(t,n,i){return t?n?e("<div>").addClass("slide").addClass(i).append(t).append(e(n)):t.addClass("slide").addClass(i).show():e("<div>").addClass("slide").addClass(i).append(e(n||""))}function r(t){var t=t;return function(n,i,a,r){i.addClass("in"),n.addClass("out"),e("img",t).show(),t.addClass("transition"),setTimeout(function(){n.remove(),t.removeClass("transition"),i.removeClass("in"),"function"==typeof r&&requestAnimationFrame(r),t.trigger(i===u?"emptySlide":"transitionEnd",i)},a)}}function o(e){var e=e;return function(t,n,i,a){t.animate({opacity:0},i),n.animate({opacity:1},{duration:i,start:function(){n.css("display","block")},complete:function(){t.remove(),"function"==typeof a&&a(),e.trigger(n===u?"emptySlide":"transitionEnd",n)}})}}function s(){function t(t){var t=t;return function(){var n=t.width(),i=t.height(),a=t.data("image");if(a){var r=a.data("format"),o=n,s=o/r;"crop"==C.stretchMode?i>s&&(s=i,o=s*r):"adapt"==C.stretchMode?1>r&&(s=i,o=s*r):s>i&&(s=i,o=s*r);var d={position:"absolute",left:0,top:0};return C.centeredY&&e.extend(d,{top:(i-s)/2+"px"}),C.centeredX&&e.extend(d,{left:(n-o)/2+"px"}),a.width(o).height(s).css(d)}}}var l,c=arguments[0]||"",f=c.source?c:arguments[1]||{},g="string"==typeof c?c:f.source,m=f.type||"image",v=s.getPlugin(g),y=f.content,h=f.callback,w=e.Deferred();if(!g)return w.reject("Invalid Params : No source").promise();if("settings"===g)return e.extend(p,f),w.resolve(p);l=new i(f.screen,f).show(),l.data("monitored")||(d.on("resize",t(l)),l.data("monitored",!0));var C=l.data("settings")||p;e.extend(C,f),l.data("settings",C),"fade"===C.transition&&(C.transition=C.useCSSTransitions&&e.support.transition?r(l):o(l));var x,S=l.find(".slide");if(w.then(function(e,t){x=e||t?new a(e,t,m):u,(C["class"]||C.className)&&x.addClass(C["class"]||C.className),l.append(x).trigger("loaded",[f,x]),(S.length||x.length)&&C.transition(S,x,C.transitionSpeed,h)}),g)if("image"===m)if("string"==typeof g){var T=e("<img>").css({display:"none",zIndex:-999999,width:"auto",height:"auto"});T.on("load",function(){T.data("format",T.width()/T.height()),l.data("image",T),w.resolve(t(l)(),y)}).on("error",function(){l.data("image",n),w.resolve(n,y)}).appendTo(l).attr("src",g)}else l.data("image",g),g.data("format",g.width()/g.height()),g.removeAttr("style").appendTo(l),w.resolve(t(l)(),y);else w.resolve(v.load(g,f),y),l.data("image",e("iframe",l));else m="empty",l.data("image",n),w.resolve(n,y);return w.promise()}var d=e(t),u=e();t.requestAnimationFrame||(t.requestAnimationFrame=function(e){setTimeout(e,10)});var l=document,c=(l.body||l.documentElement).style;e.support.transition="WebkitTransition"in c||"MozTransition"in c||"OTransition"in c||"transition"in c;var p={screen:"#screen",stretchMode:"crop",centeredX:!0,centeredY:!0,transitionSpeed:1e3,useCSSTransitions:!0,transition:"fade"};e.extend(s,{_plugins:{},getPlugin:function(e,t){var i,a,r=s._plugins;if(t&&r[t])return r[t];for(a in r)if(i=r[a],i.canHandle(e))return i;return n},addPlugin:function(e,t,n){var i=t instanceof RegExp?function(e){return t.test(e)}:t;return s._plugins[e]={canHandle:i,load:n},s}}),s.addPlugin("image",function(t){return"string"==typeof t?/\.(png|jpg|jpeg|gif)$/i.test(t):"IMG"===e(t).prop("tagName")?!0:void 0},function(e){return e}),e.onScreen=s}(window.jQuery||window.Zepto,window),function(e,t,n){function i(t,r){function o(i){m="string"==typeof i&&"last"===i?g-1:"string"==typeof i&&"fist"===i?0:i===n||0>i||i>=g?(m+1)%g:i,o.future=v?setTimeout(function(){requestAnimationFrame(o)},f.slideDuration):0;var r=t[m];a("string"==typeof r?r:r.src,f),f.events&&e(f.screen).trigger("slide",t[m])}function s(){v=!1,clearTimeout(o.future)}function d(){v=!0,o()}function u(e){s(),o(m+1),e&&e.preventDefault()}function l(e){s(),o(m?m-1:g-1),e&&e.preventDefault()}function c(){v?s():d()}function p(e){switch(e.keyCode){case 37:l();break;case 39:u();break;case 32:c()}}var f=e.extend({},i.defaults,r),g=t.length,m=0,v=f.autoplay;return f.keyControls&&e(document).on("keydown",p),a("settings",f),o(0),{stop:s,play:d,playPause:c,displaySlide:o,previous:l,next:u}}var a=e.onScreen;if(a){var r={autoplay:!0,screen:"#screen",slideDuration:4e3,transitionSpeed:1500,keyControls:!0,videoPlayer:{bgcolor:"black",width:960,height:540,autoplay:1,color:"111"}};i.defaults=r,e.onScreen=function(t,n){return e.isArray(t)?new i(t,n):void a(t,n)},e.extend(e.onScreen,{_plugins:a._plugins,getPlugin:a.getPlugin,addPlugin:a.addPlugin})}}(window.jQuery||window.Zepto,window);